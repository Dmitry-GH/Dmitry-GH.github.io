!function(){"use strict";function a(){return{controller:b,controllerAs:"itemsCtrl"}}function b(a){var b=this;b.currentItem={},b.userComment={},b.commentsNum=0,b.objRemoved={},b.items=[],b.Save=function(b){a.LocalItems=b},b.Get=function(){a.LocalItems&&(b.items=a.LocalItems)},b.Get(),b.addItem=function(){if(b.currentItem.name){for(var a=0,c=0;c<b.items.length;c++)b.currentItem.name===b.items[c].name&&a++;a>0?alert("This name is already exist."):b.items.push({name:b.currentItem.name,lable:0,class:"",comments:[]})}else alert("Please, type item name.");b.currentItem.name="",b.Save(b.items)},b.deleteItem=function(a){b.objRemoved=b.items.filter(function(b){return b.name!==a}),b.items=b.objRemoved,b.Save(b.items)},b.isActive=function(a,c){for(var d=0;d<b.items.length;d++)b.items[d].class="";""===a?(c.class="active",b.commentsNum=b.items.indexOf(c)+1):c.class="",b.Save(b.items)},b.sendComment=function(){for(var a=0;a<b.items.length;a++)"active"===b.items[a].class&&(b.items[a].comments.push({text:b.userComment.text}),b.items[a].lable=b.items[a].comments.length);b.userComment.text="",b.Save(b.items)}}angular.module("mainApp",["ngStorage"]).directive("items",a),b.$inject=["$localStorage"]}();